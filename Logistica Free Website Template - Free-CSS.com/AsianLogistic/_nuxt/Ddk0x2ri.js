const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DVwSLOeJ.js","./plyUuadH.js","./c1m8qkdf.js","./YyW3t6KU.js"])))=>i.map(i=>d[i]);
import{_ as P}from"./YyW3t6KU.js";import{_ as Y}from"./CxfHUSFb.js";import{a as L,d as j,b as H}from"./Z4V4EkX1.js";import{k as C,Q as c,E as y,X as t,Y as M,H as T,a9 as N,U as g,I as _,b as k,l as F,w as O,a6 as w,a7 as Q,u as r,x as W,a8 as D,V as A,a3 as X,W as q}from"./c1m8qkdf.js";import{g as G,u as J,f as K}from"./plyUuadH.js";import"./DVwSLOeJ.js";import"./DlAUqK2U.js";import"./BNWA2ULP.js";import"./C9ibN5t9.js";import"./C73we6Xy.js";import"./BCaFOzwy.js";const Z={class:"accordion-item"},x={class:"accordion-header"},ee=["data-bs-target","aria-controls"],se=["id","data-bs-parent"],te={class:"accordion-body p-0 m-0"},oe=C({__name:"AccordionItem",props:{title:{},collapseId:{},onClickAddress:{type:Function},routeType:{},addresses:{},type:{}},setup(u){return(e,h)=>{const o=L;return c(),y("div",Z,[t("h2",x,[t("button",{class:"accordion-button shadow-none collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#${e.collapseId}-collapse`,"aria-expanded":"false","aria-controls":`${e.collapseId}-collapse`},M(e.title),9,ee)]),t("div",{id:`${e.collapseId}-collapse`,class:"accordion-collapse collapse","data-bs-parent":`#${e.collapseId}`},[t("ul",te,[(c(!0),y(T,null,N(e.addresses,a=>{var p,i;return c(),g(o,{address:{displayName:e.type=="saved"?a.label:(p=a==null?void 0:a.routes[0])==null?void 0:p.address,value:e.type=="saved"?a.full_address:(i=a==null?void 0:a.routes[0])==null?void 0:i.address,...a},"on-click-address":m=>{let f=null;if(e.type==="saved"){const s=m.address[0];f={name:(s==null?void 0:s.address)??"",full_address:m.full_address,geometry:{location:{lat:Number((s==null?void 0:s.lat)??0),lng:Number((s==null?void 0:s.lng)??0)}},type:e.routeType}}else if(e.type==="recent"){const s=m.routes[0];f={name:(s==null?void 0:s.address)??"",full_address:(s==null?void 0:s.address)??"",geometry:{location:{lat:Number((s==null?void 0:s.lat)??0),lng:Number((s==null?void 0:s.lng)??0)}},type:e.routeType}}e.onClickAddress(f)}},null,8,["address","on-click-address"])}),256))])],8,se)])}}}),ne=["id"],ae=C({__name:"MyAddressList",props:{id:{},title:{},onClickAddress:{type:Function},routeType:{},addresses:{},type:{}},setup(u){return(e,h)=>{const o=oe;return c(),y("div",{class:"accordion",id:e.id},[_(o,{id:e.id,"collapse-id":e.id,title:e.title,"on-click-address":e.onClickAddress,"route-type":e.routeType,addresses:e.addresses,type:e.type},null,8,["id","collapse-id","title","on-click-address","route-type","addresses","type"])],8,ne)}}}),de=q(()=>P(()=>import("./DVwSLOeJ.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(u=>u.default||u)),re={class:"input-container dropdown"},ie={class:"form-floating"},le=["id","placeholder"],ce=["for"],pe={class:"dropdown-menu w-100"},ue={class:"search-input-dropdown"},me={class:"address-search-results p-0 m-0"},_e={class:"text-center py-4"},ye=t("span",null,"Выбрать на карте",-1),fe={key:1,class:"text-center text-orange",style:{width:"30px",height:"30px"}},ge=t("div",{class:"spinner-grow spinner-grow-sm",role:"status"},[t("span",{class:"visually-hidden"},"Loading")],-1),he=[ge],Le=C({__name:"AddressInput",props:{isDeletable:{type:Boolean},placeholder:{},address:{},index:{},onClickDelete:{type:Function},fetchLocation:{type:Function},onClickAddress:{type:Function},onSubmitFromMap:{type:Function},routeType:{}},setup(u){const e=G(),h=J(),o=u,a=k(null),p=k(!1),i=k(null),m=K(),f=F(()=>m.savedAddresses),s=F(()=>m.recentAddresses),$=j(()=>{i.value&&i.value.length>2&&e.fetchSuggests(i.value)},200),v=()=>{a.value&&window.bootstrap.Dropdown.getInstance(a.value).hide()},V=n=>{v(),o.onClickAddress(n)},B=n=>{o.onSubmitFromMap(n)};O(()=>{i.value=o.address.full_address});const E=()=>{p.value=!p.value};return(n,l)=>{var S;const R=Y,z=H,U=L,b=de,I=ae;return c(),y("div",re,[t("div",{class:X(["input-box position-relative",{invalid:(S=o.address.isInvalid)==null?void 0:S.value}])},[t("div",{class:"input-group","data-bs-toggle":"dropdown",role:"row","data-bs-auto-close":"outside","aria-expanded":"false",ref_key:"dropdownRef",ref:a},[t("div",ie,[w(t("input",{type:"text",class:"form-control border-0 bg-transparent",id:`address_${o.address.type}_${o.index}`,placeholder:o.placeholder,"onUpdate:modelValue":l[0]||(l[0]=d=>W(i)?i.value=d:null),onInput:l[1]||(l[1]=(...d)=>r($)&&r($)(...d))},null,40,le),[[Q,r(i)]]),t("label",{for:`address_${o.address.type}_${o.index}`},M(o.placeholder),9,ce)])],512),t("div",pe,[t("div",ue,[t("ul",me,[w(t("li",_e,[_(R)],512),[[D,r(e).isLoading]]),r(e).suggests.length===0?(c(),g(z,{key:0})):A("",!0),(c(!0),y(T,null,N(r(e).suggests,d=>(c(),g(U,{address:d,onClickAddress:V},null,8,["address"]))),256))]),t("button",{class:"d-flex justify-content-between align-items-center select-on-map-btn w-100",type:"button",onClick:l[2]||(l[2]=()=>r(h).openMap(B))},[ye,_(b,{width:"25",src:"/assets/image/icons/map.svg",alt:"Casva"})]),_(I,{id:`savedAddress-${n.index}`,"on-click-address":d=>{v(),n.onSubmitFromMap(d)},"route-type":n.routeType,addresses:r(f),type:"saved",title:"Сохраненные адреса"},null,8,["id","on-click-address","route-type","addresses"]),_(I,{id:`recentAddress-${n.index}`,"route-type":n.routeType,addresses:r(s),"on-click-address":d=>{v(),n.onSubmitFromMap(d)},type:"recent",title:"Часто используемые"},null,8,["id","route-type","addresses","on-click-address"])])]),w(t("button",{class:"p-0 m-0 close-btn position-absolute",onClick:l[3]||(l[3]=(...d)=>n.onClickDelete&&n.onClickDelete(...d))},[_(b,{width:"22",src:"/assets/image/icons/close.svg",alt:""})],512),[[D,o.isDeletable]])],2),t("button",{class:"input-container__location-button",onClick:l[4]||(l[4]=()=>n.fetchLocation(E)),type:"button"},[r(p)?A("",!0):(c(),g(b,{key:0,width:"25",src:"/assets/image/icons/location.svg",alt:""})),r(p)?(c(),y("div",fe,he)):A("",!0)])])}}});export{Le as default};
